# 浅谈算法——博弈论（从零开始的博弈论）

> 介绍一下博弈论中一些单一游戏的决策和常见的Nim模板与证明（证明就略了）
来源于知乎文章，出处为：https://zhuanlan.zhihu.com/p/50787280?utm_psn=1778375891133321216


## 例1：取石子游戏之一

有两个游戏者：A和B。有n颗石子。

约定：两人轮流取走石子，每次可取1、2或3颗。A先取，取走最后一颗石子的人获胜。

问题：A有没有必胜的策略？

> 分析：这是小学必备奥数题之一，我们可以很容易的知道，当n为0,4,8,12……时，A必定会输，因为不论A取多少，B只要和A共同取走4即可；当n不为0,4,8,12……时，A只需要将n取成4的倍数，这样就变成了B先取，B一定会输，所以A一定会赢。
>
> 经过我们的分析发现，对这个游戏而言，0,4,8,12……这些状态是对于先手的**必败状态**，而其他状态是对于先手的**必胜状态**。

如果我们推广一下，每次不一定取1、2、3颗，而是取1~m颗，那么我们就可以得到，如果 𝑛%(𝑚+1)=0 ，即为先手**必败状态**，否则为先手**必胜状态**。而这个游戏就是著名的**巴什博弈（Bash Game）**

## 例2：取石子游戏之二

将例1的游戏扩展一下，我们定义一个集合 𝑆={𝑝1,𝑝2,...,𝑝𝑘}(𝑘∈𝑍∗) ，A，B在游戏的时候取走的石子数必须是集合里的数，其他条件不变。

那么，A还有必胜策略吗？

> 有没有必胜策略，我们关键是要找到哪些状态是P状态，哪些状态是N状态，不过，本题没有例1那么容易判断，因此我们需要引入一个新东西——SG函数，它的定义如下：
>
> 𝑓(𝑣)=𝑚𝑒𝑥{𝑓(𝑢)|𝑢∈𝑐ℎ𝑖𝑙𝑑[𝑣]}
>
> 其中，mex(minimal excludant)是定义在整数集合上的操作。它的自变量是任意整数集合，函数值是不属于该集合的最小自然数。
>
> 𝑚𝑒𝑥(𝐴)=𝑚𝑖𝑛{𝑘|𝑘∈∁𝑁𝐴}
>
> 那么，终止状态的SG值显然为0，并且SG值为0的状态就是P状态，SG值不为0的状态就是N状态。
>
> 证明则非常显然，SG值为0的状态，说明它的所有后继状态都不为0，也就是它只能转移到非0状态，而SG值不为0的状态则不一样。

那么**SG值为0的状态就是必败状态的定义**，SG值不为0的状态就是必胜状态的定义，所以我们只需要用集合S求出每个状态的SG值即可。

## 例3：取石子游戏之三

有n个石子，A，B两人轮流取石子，规定他们每次至多只能取当前石子总数⌈𝑠/2⌉ 个石子，问A先手是否有必胜策略。

没错，这就是本题SG函数的规律，先手必败当且仅当SG值为0。

## 例4：取石子游戏之四（Nim游戏）

有n堆石子，石子数目分别为 𝑥1,𝑥2,...,𝑥𝑛 ，A，B两人每次可以选一堆石子取走任意多个，问A先手是否有必胜策略。

> 这题相当于例2的扩展版本，由于这里有多堆石子，因此我们可以得到多个SG值，而且这些SG值必定为 𝑥1,𝑥2,...,𝑥𝑛 ，那么我们怎么由这一些SG值得到整局游戏的SG值呢？

Nim游戏的神奇之处在于它的SG值和异或扯上了关系，**Nim游戏中先手必败当且仅当 𝑥1⊕𝑥2⊕...⊕𝑥𝑛=0 ,( ⊕ 为异或)**，那么，这个为什么是成立的？

> 首先， ⊕ 满足如下定律和性质：

- 交换律： 𝑥⊕𝑦=𝑦⊕𝑥
- 结合律： 𝑥⊕(𝑦⊕𝑧)=(𝑥⊕𝑦)⊕𝑧
- 拥有单位元： 0⊕𝑥=𝑥
- 相同两数运算为0： 𝑥⊕𝑥=0
- 消除律： 𝑥⊕𝑦=𝑥⊕𝑧⇒𝑦=𝑧

因此，我们得到，**对于Nim游戏而言，必败状态当且仅当 𝑥1⊕𝑥2⊕...⊕𝑥𝑛=0** ，对于其他情况，先手必能使当前局面变成必败状态。

## 例5：取石子游戏之五（Wythoff's Game）

有两堆石子，个数为 𝑥1,𝑥2 ；A，B轮流取石子，规定要么只取一堆的任意多个，要么在两堆里取同样任意多个，问A先手是否有必胜策略。

这种情况下是颇为复杂的，普通SG函数已经无法解决这个问题。我们用 (𝑎𝑘,𝑏𝑘),(𝑎𝑘⩽𝑏𝑘,𝑘∈[0,𝑛]) 表示两堆物品的数量并称其为局势，如果甲面对 (0,0) ，那么甲已经输了，这种局势我们称为奇异局势。

所以对于任意局势，先手必败当且仅当局势为奇异局势，我们只需要用通项式判断其是否为奇异局势即可。

## 例6：取石子游戏之六（Fibonacci Nim）

有一堆个数为n的石子，A，B轮流取石子，满足：

- 先手不能在第一次把所有的石子取完；
- 之后每次可以取的石子数介于1到对手刚取的石子数的2倍之间（包含1和对手刚取的石子数的2倍）。

约定取走最后一个石子的人为赢家，问A先手是否有必胜策略。

